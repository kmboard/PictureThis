{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kirk6\\\\Desktop\\\\GTBootcamp\\\\p3p\\\\portfolio-app\\\\src\\\\PortfolioFormContainer.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport './styles/Homepage.css';\nimport Header from './Header';\nimport Form from './Forms/LoginForm';\nimport PortfolioForm from './Forms/PortfolioForm';\nimport { Segment, Button } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport client from './api/ApolloClient';\nimport gql from 'graphql-tag';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CREATE_PORTFOLIO = gql`\n  mutation($name: String!, $description: String!, $files: [String!]!) {\n    updateUser(name: $name, description: $description, files: $files){\n\t\temail\n\t}\n  }\n`;\nexport const EDIT_PORTFOLIO = gql`\n  mutation($name: String!, $description: String!, $files: [String!]!) {\n    updateUser(name: $name, description: $description, files: $files){\n\t\temail\n\t}\n  }\n`;\nexport const GET_USER_DETAILS = gql`\n  {\n    meUser{\n\t\t_id,\n\t\temail,\n\t\tname,\n\t\tdescription,\n\t\tfiles\n\t}\n  }\n`;\nlet files = [\"https://cdn.pixabay.com/photo/2014/02/27/16/10/tree-276014__340.jpg\", \"https://media.istockphoto.com/photos/mountain-landscape-picture-id517188688?k=20&m=517188688&s=612x612&w=0&h=i38qBm2P-6V4vZVEaMy_TaTEaoCMkYhvLCysE7yJQ5Q=\", \"https://media.istockphoto.com/photos/hot-air-balloons-flying-over-the-botan-canyon-in-turkey-picture-id1297349747?b=1&k=20&m=1297349747&s=170667a&w=0&h=oH31fJty_4xWl_JQ4OIQWZKP8C6ji9Mz7L4XmEnbqRU=\"];\n\nclass PortfolioFormContainer extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      portfolioData: null\n    };\n\n    this.componentDidMount = async () => {\n      if (!this.props.createMode) {\n        const request = await client.mutate({\n          mutation: GET_USER_DETAILS\n        });\n        console.log(request);\n\n        if (request.data && request.data.meUser) {\n          this.setState({\n            portfolioData: request.data.meUser\n          });\n        } else {\n          console.error(\"Fetch Error\");\n        }\n      }\n    };\n\n    this.onSubmit = async fileURLs => {\n      console.log(fileURLs);\n\n      if (this.props.portfolioValues && !this.props.portfolioValues.syncErrors && this.props.portfolioValues.values) {\n        if (this.props.createMode) {\n          const {\n            name,\n            description\n          } = this.props.portfolioValues.values;\n          const request = await client.mutate({\n            variables: {\n              name,\n              description,\n              files: fileURLs\n            },\n            mutation: CREATE_PORTFOLIO\n          });\n          console.log(request);\n\n          if (request.data.updateUser) {\n            this.props.history.push(\"/portfolios\");\n          }\n        } else {\n          const {\n            name,\n            description\n          } = this.props.portfolioValues.values;\n          const request = await client.mutate({\n            variables: {\n              name,\n              description,\n              files: fileURLs\n            },\n            mutation: EDIT_PORTFOLIO\n          });\n          console.log(request);\n\n          if (request.data.updateUser) {\n            this.props.history.push(\"/portfolios\");\n          }\n        }\n      } else {\n        console.log(\"validation\");\n      }\n    };\n\n    this.componentWillUnmount = () => {};\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        display: 'flex',\n        scrollbarColor: 'transparent transparent',\n        scrollbarWidth: 'none',\n        userSelect: 'text'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Segment, {\n        className: \"sign-up-container\",\n        style: {\n          margin: '0 auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: this.props.createMode ? \"Create Portfolio\" : \"Edit Portfolio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(PortfolioForm, {\n          handleConfirm: this.handleRegConfirm // onSubmit={this.onSubmit}\n          ,\n          disableInput: this.state.disableInput,\n          createMode: this.props.createMode,\n          onSubmit: this.onSubmit,\n          portfolioData: this.state.portfolioData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\n;\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dispatch\n  };\n};\n\nconst mapStateToProps = state => {\n  return {\n    portfolioValues: state.form.portfolio,\n    isSignedIn: state.auth.isSignedIn,\n    message: state.auth.message\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PortfolioFormContainer);","map":{"version":3,"names":["React","connect","Header","Form","PortfolioForm","Segment","Button","Link","client","gql","CREATE_PORTFOLIO","EDIT_PORTFOLIO","GET_USER_DETAILS","files","PortfolioFormContainer","Component","state","portfolioData","componentDidMount","props","createMode","request","mutate","mutation","console","log","data","meUser","setState","error","onSubmit","fileURLs","portfolioValues","syncErrors","values","name","description","variables","updateUser","history","push","componentWillUnmount","render","width","display","scrollbarColor","scrollbarWidth","userSelect","margin","handleRegConfirm","disableInput","mapDispatchToProps","dispatch","mapStateToProps","form","portfolio","isSignedIn","auth","message"],"sources":["C:/Users/kirk6/Desktop/GTBootcamp/p3p/portfolio-app/src/PortfolioFormContainer.js"],"sourcesContent":["import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './styles/Homepage.css';\r\nimport Header from './Header';\r\nimport Form from './Forms/LoginForm';\r\nimport PortfolioForm from './Forms/PortfolioForm';\r\nimport { Segment, Button } from 'semantic-ui-react';\r\nimport { Link } from 'react-router-dom';\r\nimport client from './api/ApolloClient';\r\nimport gql from 'graphql-tag';\r\n\r\nexport const CREATE_PORTFOLIO = gql`\r\n  mutation($name: String!, $description: String!, $files: [String!]!) {\r\n    updateUser(name: $name, description: $description, files: $files){\r\n\t\temail\r\n\t}\r\n  }\r\n`;\r\n\r\nexport const EDIT_PORTFOLIO = gql`\r\n  mutation($name: String!, $description: String!, $files: [String!]!) {\r\n    updateUser(name: $name, description: $description, files: $files){\r\n\t\temail\r\n\t}\r\n  }\r\n`;\r\n\r\nexport const GET_USER_DETAILS = gql`\r\n  {\r\n    meUser{\r\n\t\t_id,\r\n\t\temail,\r\n\t\tname,\r\n\t\tdescription,\r\n\t\tfiles\r\n\t}\r\n  }\r\n`;\r\n\r\nlet files = [\"https://cdn.pixabay.com/photo/2014/02/27/16/10/tree-276014__340.jpg\",\r\n\"https://media.istockphoto.com/photos/mountain-landscape-picture-id517188688?k=20&m=517188688&s=612x612&w=0&h=i38qBm2P-6V4vZVEaMy_TaTEaoCMkYhvLCysE7yJQ5Q=\",\r\n\"https://media.istockphoto.com/photos/hot-air-balloons-flying-over-the-botan-canyon-in-turkey-picture-id1297349747?b=1&k=20&m=1297349747&s=170667a&w=0&h=oH31fJty_4xWl_JQ4OIQWZKP8C6ji9Mz7L4XmEnbqRU=\",];\r\n\r\nclass PortfolioFormContainer extends React.Component{\r\n\r\n\tstate={\r\n        portfolioData: null\r\n    }\r\n\r\n\tcomponentDidMount= async () =>{\r\n        if(!this.props.createMode){\r\n\t\t\tconst request = await client.mutate({\r\n\t\t\t\tmutation: GET_USER_DETAILS,\r\n\t\t\t})\r\n\r\n\t\t\tconsole.log(request);\r\n\t\t\tif(request.data&&request.data.meUser){\r\n\t\t\t\tthis.setState({portfolioData: request.data.meUser});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tconsole.error(\"Fetch Error\")\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSubmit = async (fileURLs) => {\r\n\t\tconsole.log(fileURLs);\r\n\t\tif (this.props.portfolioValues && !this.props.portfolioValues.syncErrors && this.props.portfolioValues.values) {\r\n\t\t\tif(this.props.createMode){\r\n\t\t\t\tconst {name, description} = this.props.portfolioValues.values;\r\n\t\t\t\tconst request = await client.mutate({\r\n\t\t\t\t\tvariables: { name, description, files: fileURLs },\r\n\t\t\t\t\tmutation: CREATE_PORTFOLIO,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconsole.log(request);\r\n\t\t\t\tif(request.data.updateUser){\r\n\t\t\t\t\tthis.props.history.push(\"/portfolios\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tconst {name, description} = this.props.portfolioValues.values;\r\n\t\t\t\tconst request = await client.mutate({\r\n\t\t\t\t\tvariables: { name, description, files: fileURLs },\r\n\t\t\t\t\tmutation: EDIT_PORTFOLIO,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconsole.log(request);\r\n\t\t\t\tif(request.data.updateUser){\r\n\t\t\t\t\tthis.props.history.push(\"/portfolios\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.log(\"validation\")\r\n\t\t}\r\n\t}\r\n\r\n\t// renderSignUpMessages = () => {\r\n\t// \tif (this.props.regStatus.message === \"invalid\") {\r\n\t// \t\treturn \"Unauthorized access\";\r\n\t// \t}\r\n\t// \telse if (this.props.regStatus.message === \"email\") {\r\n\t// \t\treturn \"An account with this email already exists\";\r\n\t// \t}\r\n\t// \telse if (this.props.regStatus.message === \"validation\") {\r\n\t// \t\treturn \"Please enter a valid phone number\";\r\n\t// \t}\r\n\t// \telse if (this.props.regStatus.message === \"company\") {\r\n\t// \t\treturn \"This company name is already registered\";\r\n\t// \t}\r\n\t// \telse if (this.props.regStatus.message === \"done\") {\r\n\t// \t\treturn \"We have sent a verification link to your email address. If you do not receive it within a few minutes, please check your Junk, Bulk or Spam folders. Mark the message as not spam to avoid problems receiving our correspondence in the future.\";\r\n\t// \t}\r\n\t// }\r\n\r\n\tcomponentWillUnmount=()=>{\r\n\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div style={{width:'100%',display: 'flex',scrollbarColor:'transparent transparent',scrollbarWidth:'none',userSelect:'text'}}>\r\n\t\t\t\t<Header/>\r\n\t\t\t\t<Segment className=\"sign-up-container\" style={{margin: '0 auto'}}>\r\n\t\t\t\t\t<h1>{this.props.createMode?\"Create Portfolio\":\"Edit Portfolio\"}</h1>\r\n\t\t\t\t\t<PortfolioForm\r\n\t\t\t\t\t\thandleConfirm={this.handleRegConfirm}\r\n\t\t\t\t\t\t// onSubmit={this.onSubmit}\r\n\t\t\t\t\t\tdisableInput={this.state.disableInput}\r\n\t\t\t\t\t\tcreateMode={this.props.createMode}\r\n\t\t\t\t\t\tonSubmit={this.onSubmit}\r\n\t\t\t\t\t\tportfolioData={this.state.portfolioData}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Segment>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tdispatch\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tportfolioValues: state.form.portfolio,\r\n\t\tisSignedIn: state.auth.isSignedIn,\r\n\t\tmessage: state.auth.message,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PortfolioFormContainer);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}